apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: accept-routes
spec:
  metrics:
    enable: true
    serviceMonitor:
      enable: true
  tailscale:
    acceptRoutes: true
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/refs/heads/master/v1.34.2/service.json
apiVersion: v1
kind: Service
metadata:
  annotations:
    tailscale.com/tailnet-ip: "${SPIKE_IP}"
    tailscale.com/proxy-class: accept-routes
    tailscale.com/proxy-group: egress
  name: spike
spec:
  externalName: unused
  type: ExternalName
  ports:
    - port: 9000
      targetPort: 9000
      name: http

