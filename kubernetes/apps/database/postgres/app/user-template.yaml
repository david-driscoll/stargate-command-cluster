# yaml-language-server: $schema=https://kubernetesjsonschema.dev/v1.18.1-standalone-strict/configmap-v1.json
apiVersion: v1
kind: ConfigMap
metadata:
  name: pgsql-user-template
data:
  username: "{{ .username }}"
  password: "{{ .password }}"
  port: "{{ .port }}"
  database: "{{ .database }}"
  pgpass: "{{ .hostname }}:{{ .port }}:{{ .database }}:{{ .username }}:{{ .password }}"
  hostname: "{{ .hostname }}"
  public-hostname: "${APP}.${CLUSTER_DOMAIN}"
  jdbc-uri: "jdbc:postgres://{{ .hostname }}:{{ .port }}/{{ .database }}?password={{ .password }}&user={{ .username }}&sslmode=disable"
  public-jdbc-uri: "jdbc:postgres://${APP}.${CLUSTER_DOMAIN}:{{ .port }}/{{ .database }}?password={{ .password }}&user={{ .username }}&sslmode=disable"
  uri: "postgres://{{ .username }}:{{ .password }}@{{ .hostname }}:{{ .port }}/{{ .database }}?sslmode=disable"
  public-uri: "postgres://{{ .username }}:{{ .password }}@${APP}.${CLUSTER_DOMAIN}:{{ .port }}/{{ .database }}?sslmode=disable"
  connection-string: "Host={{ .hostname }};Port={{ .port }};Database={{ .database }};Username={{ .username }};Password={{ .password }};Trust Server Certificate=true;"
  public-connection-string: "Host=${APP}.${CLUSTER_DOMAIN};Port={{ .port }};Database={{ .database }};Username={{ .username }};Password={{ .password }};Trust Server Certificate=true;"
