---
apiVersion: hyperspike.io/v1
kind: Valkey
metadata:
  name: &app ${APP}
spec:
  nodes: 3
  tls: true
  certIssuer: selfsigned
  certIssuerType: ClusterIssuer
  anonymousAuth: true
  tolerations: []
  nodeSelector: {}
  resources:
    requests:
      cpu: 50m
      memory: 256Mi
    limits:
      cpu: 200m
      memory: 1Gi
  volumePermissions: true
  exporterImage: ghcr.io/hyperspike/valkey-sidecar:latest
  image: ghcr.io/hyperspike/valkey:latest
  prometheus: true
  storage:
    spec:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 4Gi
      storageClassName: longhorn-local
