---
apiVersion: tailscale.com/v1alpha1
kind: ProxyGroup
metadata:
  name: egress
spec:
  type: egress
  hostnamePrefix: ${CLUSTER_CNAME}-egress
  replicas: 2
  tags: ["tag:egress"]
  proxyClass: proxy
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/refs/heads/master/v1.32.0/service.json
apiVersion: v1
kind: Service
metadata:
  annotations:
    tailscale.com/tailnet-fqdn: "idp.${TAILSCALE_DOMAIN}"
    tailscale.com/proxy-group: egress
  name: tailscale-idp
spec:
  externalName: idp
  type: ExternalName
---
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/refs/heads/master/v1.32.0/service.json
apiVersion: v1
kind: Service
metadata:
  annotations:
    tailscale.com/tailnet-fqdn: "go.${TAILSCALE_DOMAIN}"
    tailscale.com/proxy-group: egress
  name: tailscale-go
spec:
  externalName: go
  type: ExternalName
