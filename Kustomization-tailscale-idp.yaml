apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  creationTimestamp: "2025-09-03T19:37:17Z"
  finalizers:
  - finalizers.fluxcd.io
  generation: 1
  labels:
    kustomize.toolkit.fluxcd.io/name: cluster-apps
    kustomize.toolkit.fluxcd.io/namespace: flux-system
  name: tailscale-idp
  namespace: tailscale-system
  resourceVersion: "246001"
  uid: 1b80dffc-9bdb-4c10-8864-07467e18dd3e
spec:
  commonMetadata:
    labels:
      app.kubernetes.io/name: tailscale-idp
  components:
  - ../../../../components/volsync
  decryption:
    provider: sops
    secretRef:
      name: sops-age
  dependsOn:
  - name: tailscale-operator
    namespace: tailscale-system
  - name: volsync
    namespace: volsync-system
  force: false
  interval: 1h
  path: ./kubernetes/apps/tailscale-system/idp/app
  postBuild:
    substitute:
      APP: tailscale-idp
      NAMESPACE: tailscale-system
    substituteFrom:
    - kind: Secret
      name: cluster-secrets
      optional: false
    - kind: ConfigMap
      name: cluster-versions
      optional: false
    - kind: Secret
      name: shared-secrets
      optional: false
  prune: true
  sourceRef:
    kind: GitRepository
    name: flux-system
    namespace: flux-system
  targetNamespace: tailscale-system
  timeout: 5m
  wait: true
status:
  conditions:
  - lastTransitionTime: "2025-09-03T22:48:14Z"
    message: Running health checks for revision refs/heads/main@sha1:4eb3a978dd10a9059a2fc2e63bd0ed9f525a9d43
      with a timeout of 5m0s
    observedGeneration: 1
    reason: ProgressingWithRetry
    status: "True"
    type: Reconciling
  - lastTransitionTime: "2025-09-03T22:48:14Z"
    message: 'health check failed after 34.038924ms: failed early due to stalled resources:
      [HelmRelease/tailscale-system/tailscale-idp status: ''Failed'']'
    observedGeneration: 1
    reason: HealthCheckFailed
    status: "False"
    type: Ready
  - lastTransitionTime: "2025-09-03T22:48:14Z"
    message: 'failed early due to stalled resources: [HelmRelease/tailscale-system/tailscale-idp
      status: ''Failed'']'
    observedGeneration: 1
    reason: HealthCheckFailed
    status: "False"
    type: Healthy
  inventory:
    entries:
    - id: tailscale-system_tailscale-idp__PersistentVolumeClaim
      v: v1
    - id: tailscale-system_tailscale-idp_driscoll.dev_ApplicationDefinition
      v: v1
    - id: tailscale-system_tailscale-idp-volsync_external-secrets.io_ExternalSecret
      v: v1
    - id: tailscale-system_tailscale-idp_helm.toolkit.fluxcd.io_HelmRelease
      v: v2
    - id: tailscale-system_tailscale-idp-dst_volsync.backube_ReplicationDestination
      v: v1alpha1
    - id: tailscale-system_tailscale-idp_volsync.backube_ReplicationSource
      v: v1alpha1
  lastAttemptedRevision: refs/heads/main@sha1:4eb3a978dd10a9059a2fc2e63bd0ed9f525a9d43
  observedGeneration: -1
